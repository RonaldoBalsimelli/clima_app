<div class="container mt-5">
  <button class="toggle-theme-btn" id="toggle-theme-btn">ðŸŒž</button>
  <h1 class="text-center mb-4">PrevisÃ£o do Tempo</h1>

  <%= form_with url: '/search', method: 'post', local: true do %>
    <div class="mb-3">
      <%= text_field_tag :city, nil, class: "form-control form-control-lg", placeholder: "Digite o nome da cidade", required: true %>
    </div>
    <%= submit_tag 'Buscar', class: "btn btn-primary btn-lg" %>
  <% end %>

  <% if @temperature && @description %>
    <div class="weather-card">
      <h2 class="text-center">
        <%= @city_name %> - <%= @country %>
        <img src="https://openweathermap.org/img/wn/<%= @weather_icon %>@2x.png" alt="Ãcone do clima" class="weather-icon">
      </h2>

      <div class="weather-details">
        <div class="weather-item"><strong>CondiÃ§Ã£o:</strong> <%= @description.present? ? @description.capitalize : 'NÃ£o disponÃ­vel' %></div>
        <div class="weather-item"><strong>Temperatura Atual:</strong> <%= @temperature %>Â°C</div>
        <div class="weather-item"><strong>SensaÃ§Ã£o TÃ©rmica:</strong> <%= @feels_like %>Â°C</div>
        <div class="weather-item"><strong>Temperatura MÃ­nima:</strong> <%= @temp_min %>Â°C</div>
        <div class="weather-item"><strong>Temperatura MÃ¡xima:</strong> <%= @temp_max %>Â°C</div>
        <div class="weather-item"><strong>Umidade:</strong> <%= @humidity %>%</div>
        <div class="weather-item"><strong>PressÃ£o AtmosfÃ©rica:</strong> <%= @pressure %> hPa</div>
        <div class="weather-item"><strong>Velocidade do Vento:</strong> <%= @wind_speed %> m/s</div>
        <div class="weather-item"><strong>DireÃ§Ã£o do Vento:</strong> <%= @wind_deg %>Â°</div>
        <div class="weather-item"><strong>Nuvens:</strong> <%= @clouds %>%</div>
        <div class="weather-item"><strong>Visibilidade:</strong> <%= @visibility %> metros</div>
        <div class="weather-item"><strong>Nascer do Sol:</strong> <%= @sunrise %></div>
        <div class="weather-item"><strong>PÃ´r do Sol:</strong> <%= @sunset %></div>
        <div class="weather-item"><strong>Ãšltima AtualizaÃ§Ã£o:</strong> <%= @last_updated %></div>
      </div>
    </div>

    <% if @forecast.present? %>
      <h2 class="text-center mt-5">PrevisÃ£o para os prÃ³ximos dias</h2>

      <div class="forecast-container mt-4">
        <% @forecast.each do |date, data| %>
          <div class="forecast-card">
            <h5><%= date.strftime("%d/%m") %></h5>
            <img src="https://openweathermap.org/img/wn/<%= data[:icon] %>@2x.png" alt="Ãcone do clima" class="forecast-icon">
            <p><%= data[:description].capitalize %></p>
            <p><strong>Min:</strong> <%= data[:temp_min].round %>Â°C</p>
            <p><strong>Max:</strong> <%= data[:temp_max].round %>Â°C</p>
          </div>
        <% end %>
      </div>
    <% end %>

  <% elsif flash[:alert] %>
    <div class="alert alert-danger mt-4">
      <%= flash[:alert] %>
    </div>
  <% end %>
</div>
